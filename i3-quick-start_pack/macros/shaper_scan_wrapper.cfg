[gcode_macro EZ_SHAPER_SCAN]
description: "Wrapper for resonance measurement"
gcode:
  {% if printer.configfile.settings.adxl345 is not defined and printer.configfile.settings.adxl345_rpi is not defined %}
    RESPOND TYPE=error MSG="No ADXL detected; edit installer choices or config"
    {% exit 0 %}
  {% endif %}
  M117 Shaper Cal
  SHAPER_CALIBRATE
  SAVE_CONFIG
