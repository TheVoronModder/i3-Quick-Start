[gcode_macro INITIAL_SETUP]
description: "One-click setup: QGL → Mesh → Flow → PA → IS"
gcode:
  RESPOND TYPE=command MSG="action:notification title=Quick Start text=Starting setup"
  SET_DISPLAY_TEXT MSG="Quick Start: Initializing"

  {% if printer.configfile.settings.quad_gantry_level is defined %}
    RESPOND TYPE=command MSG="action:notification title=Quick Start text=Quad Gantry Level"
    QUAD_GANTRY_LEVEL
  {% elif printer.configfile.settings.z_tilt is defined %}
    RESPOND TYPE=command MSG="action:notification title=Quick Start text=Z-Tilt Adjust"
    Z_TILT_ADJUST
  {% endif %}

  RESPOND TYPE=command MSG="action:notification title=Quick Start text=Bed Mesh"
  BED_MESH_CALIBRATE

  RESPOND TYPE=command MSG="action:notification title=Quick Start text=Flow tuning strip"
  EZ_FLOW_TUNE

  RESPOND TYPE=command MSG="action:notification title=Quick Start text=PA tuning line"
  EZ_PA_TUNE

  {% set has_adxl = printer.configfile.settings.adxl345 is defined or printer.configfile.settings.adxl345_rpi is defined %}
  {% if has_adxl %}
    RESPOND TYPE=command MSG="action:notification title=Quick Start text=Measuring resonance"
    EZ_SHAPER_SCAN
  {% else %}
    RESPOND TYPE=command MSG="action:notification title=Quick Start text=Skipping IS (no ADXL)"
  {% endif %}

  RESPOND TYPE=command MSG="action:notification title=Quick Start text=Complete — SAVE_CONFIG"
  SAVE_CONFIG
